<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>d3-常见布局-弦图</title>
    <script src="./js/d3.v3.min.js" charset="utf-8"></script>
</head>
<body>
<div>
    api：https://github.com/d3/d3-3.x-api-reference/blob/master/Layouts.md

</div>
</body>
<script>

    var city_name = ["北京", "上海", "广州", "深圳", "香港"];
    var population = [
        [1000, 3045, 4567, 1234, 3714],
        [3214, 2000, 2060, 124, 3234],
        [8761, 6545, 3000, 8045, 647],
        [3211, 1067, 3214, 4000, 1006],
        [2146, 1034, 6745, 4764, 5000]
    ];
    var chord_layout = d3.layout.chord()
            .padding(0.03)
            .sortSubgroups(d3.descending)
            .matrix(population);

    var _w = 600, _h = 600;
    var innerRadius = _w / 2 * 0.7, outerRadius = innerRadius * 1.1;
    var color20 = d3.scale.category20();

    var svg = d3.select('body').append('svg').attr('width', _w).attr('height', _h).append('g')
            .attr('transform', 'translate(' + _w / 2 + ',' + _h / 2 + ')');

    var outer_arc = d3.svg.arc().innerRadius(innerRadius).outerRadius(outerRadius);

    var g_outer = svg.append('g');

    g_outer.selectAll('path').data(chord_layout.groups)
            .enter()
            .append('path')
            .style('fill',function(d){return color20(d.index)})
            .style('stroke',function(d){return color20(d.index)})
            .attr('d',outer_arc);

    g_outer.selectAll('text').data(chord_layout.groups)
            .enter()
            .append('text')
            .each(function(d,i){
                d.angle = (d.startAngle + d.endAngle)/2;
                d.name = city_name[i]
            })


</script>
</html>