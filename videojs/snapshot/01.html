
<!DOCTYPE html>
<html lang="en">

<head>
    <title>Video Snapshot - Video.JS Plugin</title>

    <meta name="Description" content="Custom Video.JS plugins. " />
    <meta name="Keywords" content="video.js, html5, custom, plugins, video player for the web, flash video player,web media player,mp4 flash player,mp4 player,open source video player,flash 9 video,flash video,web video,flv player,flv video" />

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="Distribution" content="Global" />
    <meta name="Author" content="Dan Rossi" />
    <meta name="Robots" content="index,follow" />

    <!-- Origin Trial Token, feature = WebVR (For Chrome M62+), origin = https://electroteque.org, expires = 2018-04-21 -->
    <meta http-equiv="origin-trial" data-feature="WebVR (For Chrome M62+)" data-expires="2018-04-21" content="AkDlLsDIfCOn9VF45CBywsfMAsFvfdmw5oCJ3NCMq5NQCwSj9+ECcd8utPDTMtl/poYiZXmD+BH50WiwYr0fSQMAAABoeyJvcmlnaW4iOiJodHRwczovL2VsZWN0cm90ZXF1ZS5vcmc6NDQzIiwiZmVhdHVyZSI6IldlYlZSMS4xTTYyIiwiZXhwaXJ5IjoxNTI0MzI1NDM4LCJpc1N1YmRvbWFpbiI6dHJ1ZX0=">

    <link rel="stylesheet" type="text/css" href="//static.electroteque.org/css/global-0.52.css" />

    <link href="//vjs.zencdn.net/5.8/video-js.min.css" rel="stylesheet">
    <script src="//vjs.zencdn.net/5.8/video.min.js"></script>

    <link href="//static.electroteque.org/css/videojs/video-js.min.css" rel="stylesheet">
    <script src="//static.electroteque.org/js/videojs/video.min.js"></script>


    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>


    <script type="text/javascript">
        //$("#right a[href=/snapshot]").addClass("active");
    </script>





    <style type="text/css">
        div.overlay {
            width:1024px;
            height:432px;

        }

        #header {
            width: 983px;
            margin:0px auto;
        }

        #header h1 {
            text-align: center;
            font-size: 30px;
            background-repeat:no-repeat;
            color:#809198;
            font-weight: bold;
        }



    </style>



</head>

<body id="plugins">
<div id="header" class="box">
    <h1>Electroteque Media</h1>
</div>
<div id="wrap">
    <div>
        <link href="//static.electroteque.org/css/videojs/snapshot.min.css" rel="stylesheet" type="text/css" />
        <style>



            .snapshot.preview {
                float: right;
                width: 600px;

            }









        </style>
        <script src="//static.electroteque.org/js/videojs/snapshot-6.0.0.js">




        </script>
        <div id="content">
            <h1> <strong>Video Screen Snapshot</strong> <em>Make video screen snapshots directly within Video.JS</em> </h1>
            <div width="600px" id="playercontainer"> <video id="player" class="video-js vjs-default-skin" controls="" preload="none" width="640" height="264" data-setup="{}"> <source type="video/mp4" src="//videos.electroteque.org/bitrate/big_buck_bunny_2000k.mp4">
                </source> <source type="video/webm" src="//videos.electroteque.org/bitrate/big_buck_bunny_2000k.webm">
                </source> <source type="video/ogg" src="//videos.electroteque.org/bitrate/big_buck_bunny_2000k.ogv">
                </source>
            </video>
                <div class="snapshot preview">
                </div>
            </div>
            <script>


                !(function () {
                    var player = videojs('player', {
                        plugins: {
                            snapshot: {
                                snapshotname: "test-[time].png",
                                //previewContainer: ".preview",
                                debuglog: true,
                                //serverurl: "http://s3upload.electroteque.org/save",
                                //tokenurl: "http://s3upload.electroteque.org/token",
                                serverurl: "https://flowplayer.electroteque.org/snapshot/index/save",
                                tokenurl: "https://flowplayer.electroteque.org/snapshot/index/token",
                                success: "Capture Complete",
                                error: "Capture Failed Try Again",
                                type: "png",
                                quality: 1,
                                originbaseurl: "http://crossorigin.electroteque.org/video/",
                                notification: {
                                    showDelay: 1000,
                                    hideDelay: 2000
                                }
                            }
                        }
                    });


                    player.on("capturecomplete", function(api, data) {
                        console.log("Capture Complete ");
                        $(".preview").empty().append(data.img);
                        //console.log("Capture Complete: ", data);
                    });

                    player.on("captureerror", function(api, error) {
                        console.log("Capture Error: ", error);
                    });

                    player.on("uploaderror", function(api, error) {
                        console.log("Upload Error: ", error);
                    });

                    player.on("uploadprogress", function(api, progress) {
                        console.log("Uploading Progress " + (progress.loaded / progress.total * 100) + "%");
                    });

                    player.on("resizeprogress", function(api, progress) {
                        console.log("Resize Progress: " + progress.index / progress.total * 100 + "%");
                        console.log("Current Size", progress.current);
                    });

                    player.on("proxyprocessing", function() {
                        console.log("Cors Proxy Processing");
                    });



                })();





            </script><br clear="all" />
            <p> This demonstrates manually capturing a video frame to a jpeg or png image and saving to a backend service either as file uploads or base64 encoded images. </p>
            <p> The `dimensions` config can produce multiple sizes including thumbnails. Browsers do not do a good job resizing so a new system has been implemented to provide higher quality downsizing and resampling that should match Photoshop. Web Workers is used for fast processing and non blocking. Web Workers is available in most modern browsers including on Windows 7. A WebGL option for faster resizing will be made available. </p>
            <p> For browsers that don't support Html Blob and Canvas include the Html5 polyfills to allow for capture support. </p>
            <p> Work around solution for non-inline player support like on Iphone. </p>
            <p> Example backends provided have been upgraded to provide both multiple file upload support and saving directly to Amazon S3. </p>
            <h2>Features</h2> <br /><br />
            <ul>
                <li>
                    Capture of video frame from any http streaming source with <a href="http://enable-cors.org/">Cross Origin Resource Sharing enabled</a> and a browser that supports the canvas element, a fallback for IE is supplied.
                </li>
                <li>
                    Jpeg and PNG encoding on the fly with a quality setting for jpeg encoding.
                </li>
                <li>
                    High quality and fast browser based resizing solution that can provide multiple sizes including thumbnails.
                </li>
                <li>
                    Javascript api service to automate the capture.
                </li>
                <li>
                    Returning the canvas to display in a preview window.
                </li>
                <li>
                    Example backend included to demonstrate saving the image sent as multiple image uploads of as base64 encoded images.
                </li>
                <li>
                    Example backend included to demonstrate generating an authentication signature and post data options for uploading files directly to S3.
                </li>
                <li>
                    Csrf token security support for authentating the upload service.
                </li>
                <li>
                    Includes a Notification plugin to display user feedback.
                </li>
                <li>
                    Now works with Cloudfront video. Cloudfront now supports the OPTIONS request method which is sent via the browser to validate the cross origin request. see <a href="http://docs.amazonwebservices.com/AmazonS3/latest/dev/cors.html">http://docs.amazonwebservices.com/AmazonS3/latest/dev/cors.html</a>.
                </li>
                <li>
                    Cors support for browsers lacking crossOrigin video tag specs like Safari and IE11 using a proxy player work around solution.
                </li>
                <li>
                    Local downloads support for Chrome and Firefox. Safari lacks special file download features and therefore requires to be opened in a new tab.
                </li>
                <li>
                    Support and tested in Chrome,Firefox,Safari, IE 11, Edge Browser, IOS, Android. (Safari and IE11 both need the CORS proxy). Possibly support for IE9-IE10 with canvas and blob support fallbacks included.
                </li>
                <li>
                    Work around solution for non-inline player support like on Iphone. A notification will be provided when exiting fullscreen to start the capture at that current time.
                </li>
            </ul>
            <h2>Known Issues</h2>
            <ul>
                <li>
                    Safari / Webkit / IE 11 will work with same origin videos, it does not have support for cross origin with the video tag therefore the canvas cannot obtain the image. A proxy work around is required to make it function. see <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#attr-media-crossorigin">http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#attr-media-crossorigin</a>.
                </li>
                <li>
                    Native HLS playback in Safari and IOS the video does not update the current video dimensions in multi bitrate streams so there is no way to determine the source size.
                </li>
                <li>
                    For both HLS.JS and Mpeg Dash in multi bitrate streaming, the dimensions are constantly being updated but there may still be issues during transitions.
                </li>
                <li>
                    The video server backend requires to have Cors support enabled with the Access-Control-Allow-Origin header.
                </li>
                <li>
                    Safari has problems with redirecting blobs within a new window. For now it's redirecting to the same tab due to inability with download support. Chrome,Firefox,IE 11 all bring up file dialogs or download automatically.
                </li>
                <li>
                    Severe design limitation with Flowplayer 6 Flash player for RTMP and HLS streams. Unlike Flowplayer 3 and JWPlayer which provides plugin support for features, there is no Flash plugin support, the players are extremely limited re-engineered to serve one function therefore there is no way to get access to the stream and video. A Flash proxy player is provided to do the capture requiring to play the stream first. This will incur some latency with live streams including RTMP which requires an extra second delay after buffering so will not be frame accurate.
                </li>
                <li>
                    Cross origin support is lacking in Android Stock browser. The proxy cross origin work around does not work at all either. This is an identifiable bug that has been reported.
                </li>
                <li>
                    Chrome on Android has a known bug with capturing video. The captured image becomes distorted, and full of artifacts. This has something to do with GPU accelerated Html5 rendering. This is a known bug and has been reported.
                </li>
            </ul>
            <h3>(Current Version 6.0.0)</h3>
            <h2>Compatibility</h2>
            <ul>
                <li>
                    Video.Js 6.0.0+ + ad above
                </li>
            </ul>
            <div>
                <h2>Plugin Available For Purchase via Paypal</h2> <br />
                <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top"> <input type="hidden" name="cmd" value="_s-xclick" /> <input type="hidden" name="hosted_button_id" value="DDW2PVUG3BHSE" />
                    <table>
                        <tr>
                            <td>
                                <input type="hidden" name="on0" value="License Options" />License Options
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <select name="os0"> <option value="Single Domain - Suits Small Sites">Single Domain - Suits Small Sites $280.00 AUD
                                </option><option value="Multi Domain - Suits Larger Sites">Multi Domain - Suits Larger Sites $480.00 AUD
                                </option><option value="Single Domain Not For Profit">Single Domain Not For Profit $150.00 AUD
                                </option></select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="hidden" name="on1" value="Domain(s)" />Domain(s)
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input type="text" name="os1" maxlength="200" />
                            </td>
                        </tr>
                    </table> <input type="hidden" name="currency_code" value="AUD" /> <input type="image" src="https://www.paypalobjects.com/en_AU/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal &mdash; The safer, easier way to pay online." /> <img alt="" border="0" src="https://www.paypalobjects.com/en_AU/i/scr/pixel.gif" width="1" height="1" />
                </form>
            </div>
            <h2>License Information</h2>
            <p>The Snapshot plugin is a once off commercial license with updates and support to the Snapshot plugin only. Video.JS related questions and support may be provided from their documentation <a href="http://docs.videojs.com/">http://docs.videojs.com/</a></p>
            <ul>
                <li>
                    Single Domain License - Suitable for small sites with updates and unlimited support included.
                </li>
                <li>
                    Multi Domain License - Suitable for larger sites and video platform sites with updates, feature requests and unlimited priority support included.
                </li>
            </ul>
            <h3>Note:</h3>
            <p>With your purchase please provide your domains to be provided with your licensed plugin. New domains need to be requested manually for the moment. </p>
            <h2>Demo</h2>
            <p>Contact for a site demo download.</p> + +&lt; +h2&gt;Refund Policy:
            <p>Please request for a 60 day site demo before purchase. Refunds will not be issued unless under some circumstances sorry for the inconvenience.</p>
            <h2>Examples</h2> <a name="basic"></a>
            <h2>Basic Example</h2>
            <h3>Flowplayer configuration</h3>
            <p>Minimal config with a global json config.</p>
            <div class="box code">
    <pre><code class="javascript">

    $(document).ready(function() {
    var player = videojs('player');
    player.snapshot({
    snapshotname: &quot;test-[time].png&quot;,
    //previewContainer: &quot;.preview&quot;,
    debuglog: true,
    //serverurl: &quot;http://s3upload.electroteque.org/save&quot;,
    //tokenurl: &quot;http://s3upload.electroteque.org/token&quot;,
    serverurl: &quot;https://flowplayer.electroteque.org/snapshot/index/save&quot;,
    tokenurl: &quot;https://flowplayer.electroteque.org/snapshot/index/token&quot;,
    success: &quot;Capture Complete&quot;,
    error: &quot;Capture Failed Try Again&quot;,
    type: &quot;png&quot;,
    quality: 1,
    originbaseurl: &quot;http://crossorigin.electroteque.org/video/&quot;,
    notification: {
    showDelay: 1000,
    hideDelay: 2000
    }
    });

    player.on(&quot;capturecomplete&quot;, function(api, data) {
    console.log(&quot;Capture Complete &quot;);
    $(&quot;.preview&quot;).empty().append(data.img);
    //console.log(&quot;Capture Complete: &quot;, data);
    }).on(&quot;captureerror&quot;, function(api, error) {
    console.log(&quot;Capture Error: &quot;, error);
  + +++ }).on(&quot;uploaderror&quot;, function(api, error) {
    console.log(&quot;Upload Error: &quot;, error);
    }).on(&quot;uploadprogress&quot;, function(api, progress) {
    console.log(&quot;Uploading Progress &quot; + (progress.loaded / progress.total * 100) + &quot;%&quot;);
    }).on(&quot;resizeprogress&quot;, function(api, progress) {
    console.log(&quot;Resize Progress: &quot; + progress.index / progress.total * 100 + &quot;%&quot;);
    console.log(&quot;Current Size&quot;, progress.current);
    }).on(&quot;proxyprocessing&quot;, function() {
    console.log(&quot;Cors Proxy Processing&quot;);
    });


    });
</code></pre>
            </div>
            <p>A preview display can be enabled to display the captured video frame using a css class name `snapshot preview` </p>
            <div class="box code">
    <pre><code class="html">
    &lt;div class=&quot;snapshot preview&quot;/&gt;
</code></pre>
            </div>
            <h2>Configuration</h2>
            <p> Here is a list of the configuration options: </p>
            <table class="listing">
                <thead>
                <tr>
                    <th nowrap="">
                        property / datatype
                    </th>
                    <th>
                        default
                    </th>
                    <th>
                        description
                    </th>
                </tr>
                </thead>
                <tr>
                    <td class="code">
                        savelocal
                        <div class="type">
                            boolean
                        </div>
                    </td>
                    <td class="code default">
                        false
                    </td>
                    <td class="description">
                        Enable local download support. No server side is required.
                    </td> +
                </tr>
                <tr>
                    <td class="code">
                        originbaseurl
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                    </td>
                    <td class="description">
                        For cross origin work arounds, use this base url to a proxy location on the same domain as the page.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        serverurl
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                    </td>
                    <td class="description">
                        The location to the backend server for saving the images.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        tokenurl
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                    </td>
                    <td class="description">
                        The location of the backend server for obtaining a csrf token.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        token
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                    </td>
                    <td class="description">
                        The csrf token to use with the save request.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        tokendata
                        <div class="type">
                            object
                        </div>
                    </td>
                    <td class="code default">
                    </td>
                    <td class="description">
                        Configure specific data to use for sending to the token server request. The server can use this for extra authentication.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        s3url
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                    </td>
                    <td class="description">
                        The url to the S3 bucket ie //bucket.s3-region.amazonaws.com&quot;,
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        signatureurl
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                    </td>
                    <td class="description">
                        The location of the backend server for obtaining the generated authentication signature for s3 requests.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        s3
                        <div class="type">
                            object
                        </div>
                    </td>
                    <td class="code default">
                    </td>
                    <td class="description">
                        The generated s3 signature provided by the backend configured directly on the player.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        postfiles
                        <div class="type">
                            boolean
                        </div>
                    </td>
                    <td class="code default">
                        false
                    </td>
                    <td class="description">
                        Unless there is three or more dimensions configured. Set postfiles to upload images as files. With the S3 backend multiple image uploads is sent as default and a requirement.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        type
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                        png
                    </td>
                    <td class="description">
                        The image type to use for encoding either png or jpeg.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        quality
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                        1
                    </td>
                    <td class="description">
                        The png / jpeg compression quality.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        dimensions
                        <div class="type">
                            array
                        </div>
                    </td>
                    <td class="code default">
                    </td>
                    <td class="description">
                        A list of dimensions to use for resizing the still including to thumbnails. For thumbnails the `thumbnail` property is required.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        unsharpAmount
                        <div class="type">
                            number
                        </div>
                    </td>
                    <td class="code default">
                        80
                    </td>
                    <td class="description">
                        The sharpness setting for the image resizer in percentage. 50-100 is a good range.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        unsharpRadius
                        <div class="type">
                            number
                        </div>
                    </td>
                    <td class="code default">
                        0.6
                    </td>
                    <td class="description">
                        Radius of Gaussian blur for the image resizer that affects sharpness. values between 0.5 and 2.0
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        unsharpThreshold
                        <div class="type">
                            number
                        </div>
                    </td>
                    <td class="code default">
                        2
                    </td>
                    <td class="description">
                        Threshold for unsharp mask for the image resizer. values between 0 and 255.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        success
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                        Capture Complete
                    </td>
                    <td class="description">
                        The capture success notification message.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        error
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                        Capture Failed Try Again
                    </td>
                    <td class="description">
                        The capture failure notification message.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        processing
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                        Processing Please Wait
                    </td>
                    <td class="description">
                        The processing notification message.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        noinline
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                        Click Capture To Take Snapshot At The Current Time
                    </td>
                    <td class="description">
                        For non-inline players like on Iphone this will notify the user to start capturing after exiting native player fullscreen.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        thumbnail
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                        Generating Thumbnail
                    </td>
                    <td class="description">
                        The thumbnail creation notification message.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        debug
                        <div class="type">
                            boolean
                        </div>
                    </td>
                    <td class="code default">
                        false
                    </td>
                    <td class="description">
                        Display debug logs.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        captureswf
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                    </td>
                    <td class="description">
                        The location to the Flash proxy player for capturing.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        pauseOnCapture
                        <div class="type">
                            boolean
                        </div>
                    </td>
                    <td class="code default">
                        true
                    </td>
                    <td class="description">
                        Pause the stream on capture.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        notify
                        <div class="type">
                            boolean
                        </div>
                    </td>
                    <td class="code default">
                        true
                    </td>
                    <td class="description">
                        Display notifications.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        debug
                        <div class="type">
                            boolean
                        </div>
                    </td>
                    <td class="code default">
                        false
                    </td>
                    <td class="description">
                        Display debug logs.
                    </td>
                </tr>
            </table>
            <h3>Styling</h3>
            <p>The following css classes are used by styling :</p>
            <table class="listing">
                <thead>
                <tr>
                    <th nowrap="">
                        stylename
                    </th>
                    <th>
                        example
                    </th>
                    <th>
                        description
                    </th>
                </tr>
                </thead>
                <tr>
                    <td class="code">
                        vjs-snapshot-button
                    </td>
                    <td class="code">
                        @import url('http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0///static.electroteque.org/css/videojs/font-awesome.min.css'); @font-face { font-family: 'icomoon'; src:url('font/icomoon.eot?-goecin'); src:url('font/icomoon.eot?#iefix-goecin') format('embedded-opentype'), url('font/icomoon.woff?-goecin') format('woff'), url('font/icomoon.ttf?-goecin') format('truetype'), url('font/icomoon.svg?-goecin#icomoon') format('svg'); font-weight: normal; font-style: normal; } .vjs-default-skin .vjs-snapshot-button:before { content: &quot;\e90f&quot;; color: #CCCCCC; font-size: 50px; right: 0; font-family: 'icomoon'; speak: none; font-style: normal; font-weight: normal; font-variant: normal; text-transform: none; line-height: 1; /* Better Font Rendering =========== */ -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } .vjs-default-skin .vjs-snapshot-button { width: 5em; cursor: pointer; right: 0; left: 10px; } .vjs-has-started .vjs-snapshot-button { display: block; /* Visibility needed to make sure things hide in older browsers too. */ visibility: visible; opacity: 1; /* transition */ -webkit-transition: visibility 0.1s, opacity 0.1s; -moz-transition: visibility 0.1s, opacity 0.1s; -o-transition: visibility 0.1s, opacity 0.1s; transition: visibility 0.1s, opacity 0.1s; } /* Hide the control bar when the video is playing and the user is inactive */ .vjs-user-inactive .vjs-snapshot-button { display: block; visibility: hidden; opacity: 0; /* transition */ -webkit-transition: visibility 1s, opacity 1s; -moz-transition: visibility 1s, opacity 1s; -o-transition: visibility 1s, opacity 1s; transition: visibility 1s, opacity 1s; }
                    </td>
                    <td class="description">
                        The snapshot dock button.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        vjs-notification
                    </td>
                    <td class="code">
                        .vjs-notification { display: none; position: absolute; left: 0; top: 0; width: 100%; height: 100%; } .vjs-notification:before { font-family: Arial; font-size: 4em; color: #666666; /* In order to center the play icon vertically we need to set the line height to the same as the button height */ line-height: 1; text-shadow: 0.05em 0.05em 0.1em #000; text-align: center /* Needed for IE8 */; vertical-align: middle; position: absolute; left: 0; top: 50%; margin-top: -0.5em; width: 100%; } .vjs-notification div { position: absolute; top: 50%; margin-top: -0.5em; right: 0; left: 0; font-size: 1.4em; text-align: center; padding: 3px; background: #000000; background: rgba(0, 0, 0, 0.5); }
                    </td>
                    <td class="description">
                        The Notification plugin style.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        snapshot.preview
                    </td>
                    <td class="code">
                        .snapshot.preview { float: right; width: 600px; }
                    </td>
                    <td class="description">
                        The snapshot preview display style.
                    </td>
                </tr>
            </table>
            <h3>Filename Configuration</h3>
            <p>To send a custom filename for the capture image configure this on the video config with a `snapshotnames` or `snapshotname` property with a time postfix format to add the current frame time </p>
            <p>When using a multiple dimensions config the filenames list needs to match and the `snapshotnames` is required. </p>
            <div class="box code">
    <pre><code class="html">
    snapshotname: &quot;test2-[time]&quot;
</code></pre>
                <pre><code class="html">
    snapshotnames: [
    &quot;test2.jpg&quot;,
    &quot;test2-thumb.jpg&quot;
    ],
</code></pre>
            </div>
            <h3>Multiple Dimensions</h3>
            <p>To produce multiple sizes with high quality resizing and downsampling the `dimensions` config is required. For thumnails the `thumbnail` property is required on that size. </p>
            <p>If only a thumbnail dimension is configured the original video dimensions will be used for the larger still.</p>
            <p>A width an height can be set. If only a width is set the height will be scaled which is the default option.</p>
            <div class="box code">
    <pre><code class="html">
    dimensions: [
    //configure thumbnail width to auto scale height to
    { width: 180, thumbnail: true }
    ],
</code></pre>
                <pre><code class="html">
    dimensions: [
    { width: 600 },
    { width: 400 },
    { width: 180, thumbnail: true }
    ],
</code></pre>
            </div> <a name="api"></a>
            <h2>JavaScript API</h2>
            <h3>Methods</h3>
            <p> The api methods are exposed on the Flowplayer 6 api. </p>
            <div class="box code">
    <pre><code class="javascript">
    player.capture();
</code></pre>
            </div>
            <table class="listing">
                <thead>
                <tr>
                    <th class="col1">
                        method
                    </th>
                    <th class="col2">
                        returns
                    </th>
                    <th class="col3">
                        description
                    </th>
                </tr>
                </thead>
                <tr>
                    <td class="code"> <strong>capture</strong>
                    </td>
                    <td class="code type">
                    </td>
                    <td class="description">
                        Manually initiate the capture process.
                    </td>
                </tr>
            </table>
            <h3>Events</h3>
            <p> The capture complete event returns data for the generated encoded still and thumbnail as a base64 data uri string. For Html5 captures it also returns the original canvas. For backend storing of captures the data from the server is also returned. </p>
            <div class="box code">
    <pre><code class="javascript">

    player.on(&quot;capturecomplete&quot;, function(api, data) {
    //data.image - the image data uri
    //data.img - the data uri as an image.
    //data.thumbnail - the thumbnail data uri
    //data.thumbnailImg = the thumbnail data uri as an image.
    //data.images - the list of resized images or original still.
    //data.data - the data returned from the backend server

    //console.log(&quot;Capture Complete: &quot;, data);
    }).on(&quot;captureerror&quot;, function(api, error) {
    console.log(&quot;Capture Error: &quot;, error);
    }).on(&quot;uploaderror&quot;, function(api, error) {
    console.log(&quot;Upload Error: &quot;, error);
    }).on(&quot;uploadprogress&quot;, function(api, progress) {
    console.log(&quot;Uploading Progress &quot; + (progress.loaded / progress.total * 100) + &quot;%&quot;);
    }).on(&quot;resizeprogress&quot;, function(api, progress) {
    console.log(&quot;Resize Progress: &quot; + progress.index / progress.total * 100 + &quot;%&quot;);
    console.log(&quot;Current Size&quot;, progress.current);
    }).on(&quot;proxyprocessing&quot;, function() {
    console.log(&quot;Cors Proxy Processing&quot;);
    });

</code></pre>
            </div>
            <table class="listing">
                <thead>
                <tr>
                    <th nowrap="">
                        Event
                    </th>
                    <th style="width:450px">
                        When does it fire?
                    </th>
                </tr>
                </thead>
                <tr>
                    <td class="code">
                        <em>capturecomplete(data)</em>
                    </td>
                    <td class="description">
                        Html5 and Flash Version. Fired on a capture completion status and the image has been saved successfully onto the backend server. The image argument contains the generated canvas with the `canvas` property and the base64 encoded image is sent to the callback event with the `image` property to be used for displaying a preview image in the html. The data argument contains the data returned from the backend server.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        <em>captureerror(error)</em>
                    </td>
                    <td class="description">
                        Returns when there is a problem making a capture.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        <em>uploaderror(error)</em>
                    </td>
                    <td class="description">
                        Returns when there is a problem uploading to the backend server or Amazon S3.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        <em>uploadprogress(progress)</em>
                    </td>
                    <td class="description">
                        Image uploading progress event.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        <em>resizeprogress(progress)</em>
                    </td>
                    <td class="description">
                        The progress of the image resizing function.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        <em>proxyprocessing()</em>
                    </td>
                    <td class="description">
                        Notification when the CORS proxy player is loading files and seeking.
                    </td>
                </tr>
            </table>
            <h3>Token Server</h3>
            <p>The configured token server must return a Access-Control-Allow-Origin for Ajax requests and a csrf hash in a json object string like so: </p>
            <div class="box code">
    <pre><code class="javascript">
    {&quot;token&quot;:&quot;f38c9bd8483916513f057a6ea71a6d24&quot;}
</code></pre>
            </div>
            <p>If extra authentication data is required along with the token hash these can be returned with the token service and sent to the image upload service. </p>
            <div class="box code">
    <pre><code class="javascript">
    {&quot;token&quot;:&quot;f38c9bd8483916513f057a6ea71a6d24&quot;, &quot;extrahash&quot; : &quot;54353985398235985328953358&quot;}
</code></pre>
            </div>
            <p>If required the `tokendata` can be configured with extra authentication properties for the token server to use to authenticate the client and request. </p>
            <h3>NOTE: Safari tries to block third party cookie sessions with ajax requests so a special P3P header is required to work around this. </h3>
            <h3>Backend Server</h3>
            <p>Included is a backend server which demonstrates handling the cors headers required for Ajax requests, filtering the post and the image sent as a base64 encoded string or as multiple file uploads. The server should provide the parameter and token hash security and base64 decode the image as a string and store on the server. File uploads should be validated. The following properties are required or optional: </p>
            <table class="listing">
                <thead>
                <tr>
                    <th nowrap="">
                        property / datatype
                    </th>
                    <th>
                        required
                    </th>
                    <th>
                        description
                    </th>
                </tr>
                </thead>
                <tr>
                    <td class="code">
                        image
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                    </td>
                    <td class="description">
                        The image stored as a base64 encoded string.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        thumbnail
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                    </td>
                    <td class="description">
                        The thumbnail image stored as a base64 encoded string when available.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        type
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                        true
                    </td>
                    <td class="description">
                        The image type chosen either jpg or png.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        token
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                        false
                    </td>
                    <td class="description">
                        The csrf token to use with the save request, if a token is configured this can be used to check the request.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        name
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                        false
                    </td>
                    <td class="description">
                        The name of the image to use when saving.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        thumbnailname
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                        false
                    </td>
                    <td class="description">
                        The name of the thumbnail image to use when saving.
                    </td>
                </tr>
                <tr>
                    <td class="code">
                        file1..3
                        <div class="type">
                            string
                        </div>
                    </td>
                    <td class="code default">
                        false
                    </td>
                    <td class="description">
                        The name of the multiple file uploads post data stored as files. The file uploads are required to be validated with multiple options for security purposes.
                    </td>
                </tr>
            </table>
            <h2>CORS Rules Requirements</h2>
            <p>For this feature to work successfully both the backend server and the video hosting server require <a href="http://enable-cors.org/">Cross Origin Resource Sharing</a> rules to be enabled in the headers of the request.<br /> This is required to enable cross origin Ajax requests when posting the captured image data and to be able to gain access to the video data within a Html5 video tag. </p>
            <p> The header of the cors request must expose a `Access-Control-Allow-Origin` header with either a multiple list of domains including ports if using ports or an asterix wildcard to allow all domains. <br /> A `Access-Control-Allow-Methods` can be exposed to control what request methods are allowed. For authenticated logins with cookies the `Access-Control-Allow-Credentials` header must be enabled and the feature will pass cookie sessions and other cookies along with the request. </p>
            <p> An example request header can look like the following: </p>
            <div class="box code">
    <pre><code class="javascript">
    Access-Control-Allow-Origin: http://localhost:8000
    Access-Control-Allow-Methods: GET
    Access-Control-Allow-Headers: Content-Type, Accept
    Access-Control-Allow-Credentials: true
    Content-Type: application/json
</code></pre>
            </div>
            <h3>Enabling CORS on S3</h3>
            <p> Follow the guide <a href="http://docs.amazonwebservices.com/AmazonS3/latest/dev/cors.html">here</a> to enable CORS rules on the bucket. <br /><br /> In the required bucket, choose &quot;Properties&quot;, then &quot;Permissions&quot;, then choose &quot;Edit Cors Configuration&quot; </p>
            <p> A configuration should look like this or a more restricted Origin with a host domain </p>
            <div class="box code">
    <pre><code class="javascript">
    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
    &lt;CORSConfiguration xmlns=&quot;http://s3.amazonaws.com/doc/2006-03-01/&quot;&gt;
    &lt;CORSRule&gt;
    &lt;AllowedOrigin&gt;*&lt;/AllowedOrigin&gt;
    &lt;AllowedMethod&gt;GET&lt;/AllowedMethod&gt;
    &lt;AllowedMethod&gt;HEAD&lt;/AllowedMethod&gt;
    &lt;MaxAgeSeconds&gt;3000&lt;/MaxAgeSeconds&gt;
    &lt;ExposeHeader&gt;Content-Length&lt;/ExposeHeader&gt;
    &lt;ExposeHeader&gt;Accept-Ranges&lt;/ExposeHeader&gt;
    &lt;AllowedHeader&gt;*&lt;/AllowedHeader&gt;
    &lt;/CORSRule&gt;
    &lt;/CORSConfiguration&gt;

</code></pre>
            </div>
            <h3>CORS Requirements For Cloudfront</h3>
            <p>Cloudfront now supports CORS and delivers OPTIONS requests. </p>
            <p>To enable OPTIONS support in Cloudfront goto the &quot;Edit Behaviour&quot; section of the Cloudfront distribution. choose Edit on the selected behaviour. Make sure in &quot;Allow HTTP Methods&quot; it looks like &quot;GET, HEAD, OPTIONS&quot;. Check &quot;OPTIONS&quot; in the &quot;Cached HTTP Methods&quot; section and add all the suggested Whitelist Headers selection.</p>
            <h3>CORS Proxy</h3>
            <p>A CORS proxy is required to work around limitations with cross origin support on the video tag like with IE and Safari.</p>
            <p>Using either Apache or Nginx server configs assuming the proxy module is enabled can be achieved like so:</p>
            <p>Apache:</p>
            <div class="box code">
    <pre><code class="javascript">
    ProxyPass /video/ //videos.electroteque.org/
    ProxyPassReverse /video/ //videos.electroteque.org/
</code></pre>
            </div>
            <p>Nginx:</p>
            <div class="box code">
    <pre><code class="javascript">
    location /video/ {
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-NginX-Proxy true;
    proxy_pass //videos.electroteque.org/;
    proxy_redirect off;
    }
</code></pre>
            </div>
            <p>Which translates to:</p>
            <div class="box code">
    <pre><code class="javascript">
    http://origin.electroteque.org/video/big_buck_bunny_480p_h264.mp4
</code></pre>
            </div>
            <h3>Testing CORS Server Requests</h3>
            <p> CORS server requests can be initiated with the following curl command: </p>
            <div class="box code">
    <pre><code class="javascript">
    curl -I -H &quot;Origin: http://localhost:8000&quot; http://path/to/server
</code></pre>
            </div>
            <p> The CORS header should look like the following: </p>
            <div class="box code">
    <pre><code class="javascript">
    Access-Control-Allow-Origin: http://localhost:8000
    Access-Control-Allow-Methods: GET, HEAD
    Access-Control-Max-Age: 3000
    Access-Control-Allow-Credentials: true
    Vary: Origin, Access-Control-Request-Headers, Access-Control-Request-Method
</code></pre>
            </div> <a name="localExample"></a>
            <h2><em>Local Download</em> Example</h2>
            <p> This example demonstrates locally saving the generated snapshot image. </p>
            <p> To enable the locally downloading of snapshot images configure the `saveLocal` config therefore a backend server is not required. </p>
            <div width="600px" id="localcontainer"> <video id="local" class="video-js vjs-default-skin" controls="" preload="none" width="640" height="264" data-setup="{}"> <source type="video/mp4" src="//videos.electroteque.org/bitrate/big_buck_bunny_2000k.mp4">
                </source> <source type="video/webm" src="//videos.electroteque.org/bitrate/big_buck_bunny_2000k.webm">
                </source> <source type="video/ogg" src="//videos.electroteque.org/bitrate/big_buck_bunny_2000k.ogv">
                </source>
            </video>
                <div class="snapshot preview2">
                </div>
            </div>
            <script>
                $(document).ready(function() {
                    var player1 = videojs('local');
                    player1.snapshot({
                        type: "jpeg",
                        quality: 0.8,
                        snapshotname: "test.jpg",
                        //previewContainer: ".preview",
                        debuglog: true,
                        serverurl: "https://flowplayer.electroteque.org/snapshot/index/save",
                        tokenurl: "https://flowplayer.electroteque.org/snapshot/index/token",
                        success: "Capture Complete",
                        error: "Capture Failed Try Again",
                        type: "png",
                        savelocal: true,
                        quality: 1,
                        originbaseurl: "http://crossorigin.electroteque.org/video/",
                        notification: {
                            showDelay: 1000,
                            hideDelay: 2000
                        }
                    });

                    player1.on("capturecomplete", function(e, data) {
                        console.log("Capture Complete: ", data);

                        //var img = $("<img/>").attr("src","data:image/png;base64," + player.captureData.image);

                        $(".preview2").empty().append(data.img);
                    });
                });





            </script>
            <div class="box code">
    <pre><code class="javascript">
    $(document).ready(function() {
    var player1 = videojs('local');
    player1.snapshot({
    type: &quot;jpeg&quot;,
    quality: 0.8,
    snapshotname: &quot;test.jpg&quot;,
    //previewContainer: &quot;.preview&quot;,
    debuglog: true,
    serverurl: &quot;https://flowplayer.electroteque.org/snapshot/index/save&quot;,
    tokenurl: &quot;https://flowplayer.electroteque.org/snapshot/index/token&quot;,
    success: &quot;Capture Complete&quot;,
    error: &quot;Capture Failed Try Again&quot;,
    type: &quot;png&quot;,
    savelocal: true,
    quality: 1,
    originbaseurl: &quot;http://crossorigin.electroteque.org/video/&quot;,
    notification: {
    showDelay: 1000,
    hideDelay: 2000
    }
    });

    player1.on(&quot;capturecomplete&quot;, function(e, data) {
    console.log(&quot;Capture Complete: &quot;, data);

    //var img = $(&quot;<img />&quot;).attr(&quot;src&quot;,&quot;data:image/png;base64,&quot; + player.captureData.image);

    $(&quot;.preview2&quot;).empty().append(data.img);
    });
    });


</code></pre>
            </div> <br clear="all" /> <a name="thumbnailExample"></a>
            <h2><em>Thumbnail Generator</em> Example</h2>
            <p> This example demonstrates generated an image capture and a thumbnail capture. </p>
            <p> To enable the thumbnail capture configure the 'dimensons` config with a `thumbnail` size property. </p>
            <div width="600px" id="thumbcontainer"> <video id="thumbnails" class="video-js vjs-default-skin" controls="" preload="none" width="640" height="264" data-setup="{}"> <source type="video/mp4" src="//videos.electroteque.org/bitrate/big_buck_bunny_2000k.mp4">
                </source> <source type="video/webm" src="//videos.electroteque.org/bitrate/big_buck_bunny_2000k.webm">
                </source> <source type="video/ogg" src="//videos.electroteque.org/bitrate/big_buck_bunny_2000k.ogv">
                </source>
            </video>
                <div class="snapshot preview3">
                </div>
                <div class="snapshot thumbpreview">
                </div>
            </div>
            <script>
                $(document).ready(function() {
                    var player2 = videojs('thumbnails');
                    player2.snapshot({
                        type: "jpeg",
                        quality: 0.8,
                        dimensions: [
                            //configure thumbnail width to auto scale height to
                            { width: 180, thumbnail: true }
                        ],
                        snapshotnames: [
                            "test2.jpg",
                            "test2-thumb.jpg"

                        ],
                        //previewContainer: ".preview",
                        debuglog: true,
                        serverurl: "http://s3upload.electroteque.org/save",
                        tokenurl: "http://s3upload.electroteque.org/token",
                        //serverurl: "https://flowplayer.electroteque.org/snapshot/index/save",
                        //tokenurl: "https://flowplayer.electroteque.org/snapshot/index/token",
                        success: "Capture Complete",
                        error: "Capture Failed Try Again",
                        originbaseurl: "http://crossorigin.electroteque.org/video/",
                        notification: {
                            showDelay: 1000,
                            hideDelay: 2000
                        }
                    });

                    player2.on("capturecomplete", function(e, data) {
                        console.log("Capture Complete: ", data);

                        //var img = $("<img/>").attr("src","data:image/png;base64," + player.captureData.image);


                        $(".preview3").empty().append(data.img);
                        $(".thumbpreview").empty().append(data.thumbnailImg);
                    });
                });





            </script>
            <div class="box code">
    <pre><code class="javascript">
    $(document).ready(function() {
    var player2 = videojs('thumbnails');
    player2.snapshot({
    type: &quot;jpeg&quot;,
    quality: 0.8,
    dimensions: [
    //configure thumbnail width to auto scale height to
    { width: 180, thumbnail: true }
    ],
    snapshotnames: [
    &quot;test2.jpg&quot;,
    &quot;test2-thumb.jpg&quot;

    ],
    //previewContainer: &quot;.preview&quot;,
    debuglog: true,
    serverurl: &quot;http://s3upload.electroteque.org/save&quot;,
    tokenurl: &quot;http://s3upload.electroteque.org/token&quot;,
    //serverurl: &quot;https://flowplayer.electroteque.org/snapshot/index/save&quot;,
    //tokenurl: &quot;https://flowplayer.electroteque.org/snapshot/index/token&quot;,
    success: &quot;Capture Complete&quot;,
    error: &quot;Capture Failed Try Again&quot;,
    originbaseurl: &quot;http://crossorigin.electroteque.org/video/&quot;,
    notification: {
    showDelay: 1000,
    hideDelay: 2000
    }
    });

    player2.on(&quot;capturecomplete&quot;, function(e, data) {
    console.log(&quot;Capture Complete: &quot;, data);

    //var img = $(&quot;<img />&quot;).attr(&quot;src&quot;,&quot;data:image/png;base64,&quot; + player.captureData.image);


    $(&quot;.preview3&quot;).empty().append(data.img);
    $(&quot;.thumbpreview&quot;).empty().append(data.thumbnailImg);
    });
    });

</code></pre>
            </div> <br clear="all" /> <a name="sizesExample"></a>
            <h2><em>Mutliple Sizes</em> Example</h2>
            <p> This example demonstrates resizing multiple images including thumbnails with the high quality image resizer. </p>
            <p> To enable resizing configure the `dimensions` config with multiple width sizes. </p>
            <div width="600px" id="sizescontainer"> <video id="sizes" class="video-js vjs-default-skin" controls="" preload="none" width="640" height="264" data-setup="{}"> <source type="video/mp4" src="//videos.electroteque.org/bitrate/big_buck_bunny_2000k.mp4">
                </source> <source type="video/webm" src="//videos.electroteque.org/bitrate/big_buck_bunny_2000k.webm">
                </source> <source type="video/ogg" src="//videos.electroteque.org/bitrate/big_buck_bunny_2000k.ogv">
                </source>
            </video>
                <div class="snapshot preview4">
                </div>
                <div class="snapshot thumbpreview2">
                </div>
            </div>
            <script>
                $(document).ready(function() {
                    var player3 = videojs('sizes');
                    player3.snapshot({
                        dimensions: [
                            { width: 600 },
                            { width: 180, thumbnail: true }
                        ],
                        type: "jpeg",
                        quality: 0.8,

                        snapshotnames: [
                            "test2.jpg",
                            "test2-thumb.jpg"

                        ],
                        //previewContainer: ".preview",
                        debuglog: true,
                        //serverurl: "http://s3upload.electroteque.org/savefiles",
                        //tokenurl: "http://s3upload.electroteque.org/token",
                        serverurl: "https://flowplayer.electroteque.org/snapshot/index/savefiles",
                        //post as multiple file uploads
                        postfiles: true,
                        tokenurl: "https://flowplayer.electroteque.org/snapshot/index/token",
                        success: "Capture Complete",
                        error: "Capture Failed Try Again",
                        originbaseurl: "http://crossorigin.electroteque.org/video/",
                        notification: {
                            showDelay: 1000,
                            hideDelay: 2000
                        }
                    });

                    player3.on("capturecomplete", function(e, data) {
                        console.log("Capture Complete: ", data);

                        //var img = $("<img/>").attr("src","data:image/png;base64," + player.captureData.image);


                        $(".preview4").empty().append(data.img);
                        $(".thumbpreview2").empty().append(data.thumbnailImg);
                    });
                });





            </script>
            <div class="box code">
    <pre><code class="javascript">
    $(document).ready(function() {
    var player3 = videojs('sizes');
    player3.snapshot({
    dimensions: [
    { width: 600 },
    { width: 180, thumbnail: true }
    ],
    type: &quot;jpeg&quot;,
    quality: 0.8,

    snapshotnames: [
    &quot;test2.jpg&quot;,
    &quot;test2-thumb.jpg&quot;

    ],
    //previewContainer: &quot;.preview&quot;,
    debuglog: true,
    //serverurl: &quot;http://s3upload.electroteque.org/savefiles&quot;,
    //tokenurl: &quot;http://s3upload.electroteque.org/token&quot;,
    serverurl: &quot;https://flowplayer.electroteque.org/snapshot/index/savefiles&quot;,
    //post as multiple file uploads
    postfiles: true,
    tokenurl: &quot;https://flowplayer.electroteque.org/snapshot/index/token&quot;,
    success: &quot;Capture Complete&quot;,
    error: &quot;Capture Failed Try Again&quot;,
    originbaseurl: &quot;http://crossorigin.electroteque.org/video/&quot;,
    notification: {
    showDelay: 1000,
    hideDelay: 2000
    }
    });

    player3.on(&quot;capturecomplete&quot;, function(e, data) {
    console.log(&quot;Capture Complete: &quot;, data);

    //var img = $(&quot;<img />&quot;).attr(&quot;src&quot;,&quot;data:image/png;base64,&quot; + player.captureData.image);


    $(&quot;.preview4&quot;).empty().append(data.img);
    $(&quot;.thumbpreview2&quot;).empty().append(data.thumbnailImg);
    });
    });


</code></pre>
            </div> <br clear="all" /> <a name="jsapiExample"></a>
            <h2><em>JS API</em> Example</h2>
            <p> This example demonstrates using the javascript api to create the capture and a javascript event to manage the capture completion. The base64 encoded image is sent to the preview layer for displaying the preview image in the html. The dock button is also configured to be disabled. </p>
            <div width="600px" id="jsapicontainer"> <video id="jsapi" class="video-js vjs-default-skin" controls="" preload="none" width="640" height="264" data-setup="{}"> <source type="video/mp4" src="//videos.electroteque.org/bitrate/big_buck_bunny_2000k.mp4">
                </source> <source type="video/webm" src="//videos.electroteque.org/bitrate/big_buck_bunny_2000k.webm">
                </source> <source type="video/ogg" src="//videos.electroteque.org/bitrate/big_buck_bunny_2000k.ogv">
                </source>
            </video>
                <div class="snapshot preview5">
                </div>
            </div>
            <script>
                $(document).ready(function() {
                    var player2 = videojs('jsapi');
                    player2.snapshot({
                        snapshotname: "test-[time].png",
                        debuglog: true,
                        serverurl: "https://flowplayer.electroteque.org/snapshot/index/save",
                        tokenurl: "https://flowplayer.electroteque.org/snapshot/index/token",
                        success: "Capture Complete",
                        error: "Capture Failed Try Again",
                        type: "png",
                        dockbutton: false,
                        quality: 1,
                        originbaseurl: "http://crossorigin.electroteque.org/video/",
                        notification: {
                            showDelay: 1000,
                            hideDelay: 2000
                        }
                    });

                    player2.on("capturecomplete", function(e, data) {
                        console.log("Capture Complete: ", data);

                        //var img = $("<img/>").attr("src","data:image/png;base64," + player.captureData.image);

                        $(".preview5").empty().append(data.cimg);
                    });


                    function docapture(e) {
                        e.preventDefault();
                        player2.snapshot.capture();
                    }

                    $("#capturebtn").click(docapture);
                });



            </script><br clear="all" />
            <form>
                <button id="capturebtn">Do Capture</button>
                <div class="box code">
     <pre><code class="javascript">
    $(document).ready(function() {
    var player2 = videojs('jsapi');
    player2.snapshot({
    snapshotname: &quot;test-[time].png&quot;,
    debuglog: true,
    serverurl: &quot;https://flowplayer.electroteque.org/snapshot/index/save&quot;,
    tokenurl: &quot;https://flowplayer.electroteque.org/snapshot/index/token&quot;,
    success: &quot;Capture Complete&quot;,
    error: &quot;Capture Failed Try Again&quot;,
    type: &quot;png&quot;,
    dockbutton: false,
    quality: 1,
    originbaseurl: &quot;http://crossorigin.electroteque.org/video/&quot;,
    notification: {
    showDelay: 1000,
    hideDelay: 2000
    }
    });

    player2.on(&quot;capturecomplete&quot;, function(e, data) {
    console.log(&quot;Capture Complete: &quot;, data);

    //var img = $(&quot;<img />&quot;).attr(&quot;src&quot;,&quot;data:image/png;base64,&quot; + player.captureData.image);

    $(&quot;.preview3&quot;).empty().append(data.canvas);
    });


    function docapture(e) {
    e.preventDefault();
    player2.snapshot.capture();
    }

    $(&quot;#capturebtn&quot;).click(docapture);
    });
</code></pre>
                </div>
                <h2>Amazon S3 Client Side Upload Example</h2>
                <p>Included is a demo php script to upload the image captures directly to Amazon S3 as a backend service option.</p>
                <p>The backend service is required to generate the <a href="http://docs.aws.amazon.com/AmazonS3/latest/API/sig-v4-authenticating-requests.html">V4 Amazon authentication signatures</a> and policy to send with the post upload request.</p>
                <p>When multiple image dimensions are configured it is required to upload each one sequentially. If filenames have paths in them the images will be uploaded to these paths.</p> The specific required post data with the generated policy and signatures for V4 requests. This is either returned from the signature service or configured on the player with the `s3` config.
                <div class="box code">
     <pre><code class="javascript">
    {
    &quot;Content-Type&quot;:&quot;image\/jpeg&quot;,
    &quot;acl&quot;:&quot;public-read&quot;,
    &quot;success_action_status&quot;:&quot;201&quot;,
    &quot;policy&quot;:&quot;generated policy&quot;,
    &quot;X-amz-credential&quot;:&quot;accesskey\/timestamp\/region\/s3\/aws4_request&quot;,
    &quot;X-amz-algorithm&quot;:&quot;AWS4-HMAC-SHA256&quot;,
    &quot;X-amz-date&quot;:&quot;20160629T081455Z&quot;,
    &quot;X-amz-signature&quot;:&quot;generatedsignature&quot;,
    &quot;key&quot;:&quot;${filename}&quot;
    }
</code></pre>
                </div>
                <div class="box code">
     <pre><code class="javascript">

    player2.snapshot({
    dimensions: [
    { width: 600 },
    { width: 180, thumbnail: true }
    ],
    type: &quot;jpeg&quot;,
    quality: 0.8,

    snapshotnames: [
    &quot;test2.jpg&quot;,
    &quot;thumb/test2-thumb.jpg&quot;

    ],
    debuglog: true,
    s3url: &quot;//bucket.s3-region.amazonaws.com&quot;,
    signatureurl: &quot;http://s3upload.electroteque.org/signature&quot;,
    success: &quot;Capture Complete&quot;,
    error: &quot;Capture Failed Try Again&quot;,
    type: &quot;png&quot;,
    dockbutton: false,
    quality: 1,
    originbaseurl: &quot;http://crossorigin.electroteque.org/video/&quot;,
    notification: {
    showDelay: 1000,
    hideDelay: 2000
    }
    });

</code></pre>
                </div>
                <div class="box code">
     <pre><code class="javascript">

    player2.snapshot({
    dimensions: [
    { width: 600 },
    { width: 180, thumbnail: true }
    ],
    type: &quot;jpeg&quot;,
    quality: 0.8,

    snapshotnames: [
    &quot;test2.jpg&quot;,
    &quot;thumb/test2-thumb.jpg&quot;

    ],
    debuglog: true,
    s3url: &quot;//bucket.s3-region.amazonaws.com&quot;,
    s3: {
    &quot;Content-Type&quot;:&quot;image\/jpeg&quot;,
    &quot;acl&quot;:&quot;public-read&quot;,
    &quot;success_action_status&quot;:&quot;201&quot;,
    &quot;policy&quot;:&quot;generated policy&quot;,
    &quot;X-amz-credential&quot;:&quot;accesskey\/timestamp\/region\/s3\/aws4_request&quot;,
    &quot;X-amz-algorithm&quot;:&quot;AWS4-HMAC-SHA256&quot;,
    &quot;X-amz-date&quot;:&quot;20160629T081455Z&quot;,
    &quot;X-amz-signature&quot;:&quot;generatedsignature&quot;,
    &quot;key&quot;:&quot;${filename}&quot;
    },
    success: &quot;Capture Complete&quot;,
    error: &quot;Capture Failed Try Again&quot;,
    type: &quot;png&quot;,
    dockbutton: false,
    quality: 1,
    originbaseurl: &quot;http://crossorigin.electroteque.org/video/&quot;,
    notification: {
    showDelay: 1000,
    hideDelay: 2000
    }
    });
</code></pre>
                </div>
            </form>
        </div>    	<div id="right">


        <div class="box">
            <h2><span class="icon">&nbsp;</span>Javascript plugins</h2>

            <ul>
                <li><a href="/controls-preview">controls video previewer </a></li>
                <li><a href="/snapshot">video snapshot </a></li>
                <li><a href="/chromecast">chromecast </a></li>
                <li><a href="/vr360">VR 360&#176; video</a></li>
            </ul>

            <div class="clear"></div>

        </div>



        <div class="box">
            <h2><span>&nbsp;</span>Support</h2>
            <ul>
                <li><a href="/support">support</a></li>
            </ul>

            <div class="clear"></div>

        </div>



    </div>
    </div>
    <div class="clear"></div>
    <div id="footer"></div>
</div>
</body>
</html>